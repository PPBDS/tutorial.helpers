<table>
 <thead>
  <tr>
   <th style="text-align:left;"> id </th>
   <th style="text-align:left;"> submission_type </th>
   <th style="text-align:left;"> answer </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> tutorial-id </td>
   <td style="text-align:left;"> none </td>
   <td style="text-align:left;"> 131-stops </td>
  </tr>
  <tr>
   <td style="text-align:left;"> name </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Naveed Ahmad </td>
  </tr>
  <tr>
   <td style="text-align:left;"> email </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> naveedgill4u@yahoo.com </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Wisdom, Justice, Courage, and Temperance </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> show_file(".gitignore")
stops_files
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> show_file("stops.qmd", chunk = "Last")
#| message: false
library(tidyverse)
library(primer.data)
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(tidyverse)
+ library(primer.data)
── Attaching core tidyverse packages ───────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ─────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package to force all conflicts to become errors
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> New Orleans Traffic Stops Data
Description
This data is from the Stanford Open Policing Project, which aims to improve police accountability and transparency by providing data on traffic stops across the United States. The New Orleans dataset includes detailed information about traffic stops conducted by the New Orleans Police Department. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Difference between two potential outcomes </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Two potential outcomes cannot be studied about an individual at the same time </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Zone </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Guidance, if the driver was guided it will carry 9 scores for future avoidance of stop and if not then it will carry 3 scores to avoid future stop </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Two, either may be arrested or not </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> if wearing mask 1 score
if not wearing mask 0 score 
casual effect 1-0 = 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-12 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> sex </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> female group may different average value of arrest then men </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> what is the average difference of being arrested on the basis of race? </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Wisdom guides for specific research question, preceptor table and assumption of validity </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> A table with units for each observation, outcome variable and covariates, if all values are filled, answer our research question. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> A table with units for each observation, outcome variable and covariates </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> each stop </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> arrested </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> race, age, sex, place, time, date </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Its predictive model, no treatment </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> present </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Units for each individual stopped, arrested outcome variable, race, age, sex, zone, covariates </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> What is the average difference of arrest between white and black drivers adjusting sex and zone? </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> When stopped, the arrest of drivers may be predicted to very on some factors like race, sex, zone. In this study we will use data from the open policing project to predict the arrest by accounting for some covariates. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> It involves creation of population table, and assumptions of validity, stability, representativeness and unconfoundedness. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The relationship between columns of preceptor table and columns of data set is similar </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Columns of data may not have the similar columns in preceptor table, as individual stopped may have different attitude in both data and preceptor table </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> A table having rows with unit and time combination for recording all stopped with other variables </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Unit is the row recording each stopped individual on specific time period </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Stability means the relationship between columns of the population table is consistent with three categories of rows: rows of preceptor table, data and other rows of population table. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The police officer as well drivers and legal provisions may have changed over the time, behavior of drivers and police officers. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The preceptor table may have different drivers then in data and population table, or zone restrictions may have changed </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The population may have drivers who were not educated as in the data set </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The preceptor table may have individual drivers who were more trained then in population table. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Treatment assignment should be independent or unbiased </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-12 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(tidymodels)
── Attaching packages ─────────────────────────────────────── tidymodels 1.3.0 ── </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(broom) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Since $Y$ is a binary variable (with exactly two possible values), the probability family is **Bernoulli**:

$$
Y \sim \text{Bernoulli}(\rho)
$$

where $\rho$ is the probability that one of the two possible values — conventionally referred to as 1 (or TRUE) — occurs. By definition, $1 - \rho$ is the probability of the other value.

For a binary outcome variable, we use a **log-odds model**:

$$
\log\left(\frac{\rho}{1 - \rho}\right) = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + \cdots + \beta_k X_k
$$ </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-15 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> However, our assumptions that data is valid, stable and representative of all drivers if not proved fully, the predictions may very. Because, the divers or offcicers may have change in behavior, education, traing, and also change in zone may differ hence, our predictions about arrest may very from actual. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> it decide about Data Generating Mechanizm </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-2 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-3 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") |&gt;
   fit(arrested ~ sex, data = x) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-4 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") |&gt;
   fit(arrested ~ sex, data = x) |&gt;
   tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-5 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") |&gt;
   fit(arrested ~ race, data = x) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-6 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") |&gt;
   fit(arrested ~ race, data = x) |&gt;
   tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-7 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") |&gt;
   fit(arrested ~ sex + race, data = x) |&gt;
   tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-8 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") |&gt;
   fit(arrested ~ sex + race*zone, data = x) |&gt;
   tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-9 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> fit_stops </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> fit_stops
parsnip model object


Call:
stats::lm(formula = arrested ~ sex + race * zone, data = data)

Coefficients:
    (Intercept)          sexMale        raceWhite            zoneB  
      0.1773298        0.0614460       -0.0445247        0.0146036  
          zoneC            zoneD            zoneE            zoneF  
      0.0061012        0.0780600        0.0019025       -0.0027057  
          zoneG            zoneH            zoneI            zoneJ  
      0.0308717        0.0757019        0.0330416        0.0237773  
          zoneK            zoneL            zoneM            zoneN  
      0.0586687       -0.0038877        0.0393026        0.0139437  
          zoneO            zoneP            zoneQ            zoneR  
      0.0232251        0.0140617        0.0126170        0.0119566  
          zoneS            zoneT            zoneU            zoneV  
      0.0594727        0.0113267        0.0071986        0.0770051  
          zoneW            zoneX            zoneY  raceWhite:zoneB  
      0.1143814        0.0057280        0.0386437       -0.0077384  
raceWhite:zoneC  raceWhite:zoneD  raceWhite:zoneE  raceWhite:zoneF  
      0.0065557        0.0294040        0.0068179       -0.0137965  
raceWhite:zoneG  raceWhite:zoneH  raceWhite:zoneI  raceWhite:zoneJ  
      0.0088500        0.0085970       -0.0339373       -0.0244272  
raceWhite:zoneK  raceWhite:zoneL  raceWhite:zoneM  raceWhite:zoneN  
     -0.0381747       -0.0075094       -0.0423222       -0.0566405  
raceWhite:zoneO  raceWhite:zoneP  raceWhite:zoneQ  raceWhite:zoneR  
     -0.0149832        0.0092133       -0.0544990       -0.0379411  
raceWhite:zoneS  raceWhite:zoneT  raceWhite:zoneU  raceWhite:zoneV  
     -0.0250048       -0.0272932        0.0383220       -0.0387945  
raceWhite:zoneW  raceWhite:zoneX  raceWhite:zoneY  
     -0.1233162        0.0843196       -0.0002596  
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(easystats)
# Attaching packages: easystats 0.7.4
✔ bayestestR  0.16.0   ✔ correlation 0.8.7 
✔ datawizard  1.1.0    ✔ effectsize  1.0.1 
✔ insight     1.3.0    ✔ modelbased  0.11.2
✔ performance 0.14.0   ✔ parameters  0.26.0
✔ report      0.6.1    ✔ see         0.11.0

&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-12 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> check_predictions(extract_fit_engine(fit_stops))
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> $$
\widehat{\text{arrested}} = 0.177 
+ 0.0614 \cdot \text{sex}_{\text{Male}} 
- 0.0445 \cdot \text{race}_{\text{White}} 
+ 0.0146 \cdot \text{zone}_{\text{B}} 
+ 0.00610 \cdot \text{zone}_{\text{C}} 
+ 0.0781 \cdot \text{zone}_{\text{D}} 
+ 0.00190 \cdot \text{zone}_{\text{E}} 
- 0.00271 \cdot \text{zone}_{\text{F}} 
+ 0.0309 \cdot \text{zone}_{\text{G}} 
+ 0.0757 \cdot \text{zone}_{\text{H}} 
+ \text{(interaction terms for race and zone)}
$$ </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> tutorial.helpers::show_file("stops.qmd", chunk = "Last")
#| cache: true
x &lt;- stops |&gt;
  filter(race %in% c("black", "white")) |&gt;
  mutate(race = str_to_title(race), 
         sex = str_to_title(sex))

fit_stops &lt;- linear_reg() |&gt;
    set_engine("lm") |&gt;
    fit(arrested ~ sex + race*zone, data = x)
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-15 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> tutorial.helpers::show_file(".gitignore")
stops_files
*_cache
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-16 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> tidy(fit_stops, conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-17 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> tutorial.helpers::show_file("stops.qmd", chunk = "Last")
#| message: false
#| warning: false
stops_tbl &lt;- tidy(fit_stops, conf.int = TRUE) |&gt;
  select(term, estimate, conf.low, conf.high) |&gt;
  mutate(across(c(estimate, conf.low, conf.high), round, 2)) |&gt;
  gt() |&gt;
  tab_header(
    title = "Coefficients with 95% Confidence Intervals"
  ) |&gt;
  cols_label(
    term = "Term",
    estimate = "Estimate",
    conf.low = "95% CI Lower",
    conf.high = "95% CI Upper"
  ) |&gt;
  fmt_number(
    columns = c(estimate, conf.low, conf.high),
    decimals = 2
  ) |&gt;
  tab_options(
    table.font.size = "small",
    table.border.top.color = "gray80",
    table.border.bottom.color = "gray80"
  )
stops_tbl
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-18 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> We used logistic regression model to predict arrests as function of race, sex, and zone. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Modesty in claims because our results are based upon assumptions </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Male has .06 more chances of arrest than female </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Race white has -.04 less chances of arrest </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> There are 0.18 chances of a driver being arrested at stop </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(marginaleffects)
Please cite the software developers who make your work possible.
One package:             citation("package_name")
All project packages:    softbib::softbib()
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> what is the average difference of black and white drivers of being arrested on basis of sex, race and zone at each stop? </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> predictions(fit_stops) 

 Estimate Std. Error    z Pr(&gt;|z|)     S 2.5 % 97.5 %
    0.179    0.00343 52.2   &lt;0.001   Inf 0.173  0.186
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.250    0.00451 55.5   &lt;0.001   Inf 0.241  0.259
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.232    0.01776 13.1   &lt;0.001 127.6 0.198  0.267
--- 378457 rows omitted. See ?print.marginaleffects ---
    0.208    0.00390 53.4   &lt;0.001   Inf 0.201  0.216
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.189    0.00545 34.7   &lt;0.001 874.0 0.179  0.200
Type: numeric </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> predictions(fit_stops, by = "sex")

    sex Estimate Std. Error   z Pr(&gt;|z|)   S 2.5 % 97.5 %
 Female    0.192   0.001234 156   &lt;0.001 Inf 0.190  0.194
 Male      0.254   0.000823 309   &lt;0.001 Inf 0.253  0.256

Type: numeric </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> predictions(fit_stops, condition = "sex")

 Estimate Std. Error    z Pr(&gt;|z|)     S 2.5 % 97.5 %
    0.179    0.00343 52.2   &lt;0.001   Inf 0.173  0.186
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.250    0.00451 55.5   &lt;0.001   Inf 0.241  0.259
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.232    0.01776 13.1   &lt;0.001 127.6 0.198  0.267
--- 378457 rows omitted. See ?print.marginaleffects ---
    0.208    0.00390 53.4   &lt;0.001   Inf 0.201  0.216
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.189    0.00545 34.7   &lt;0.001 874.0 0.179  0.200
Type: numeric
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> predictions(fit_stops, condition = c("sex", "race"))

 Estimate Std. Error    z Pr(&gt;|z|)     S 2.5 % 97.5 %
    0.179    0.00343 52.2   &lt;0.001   Inf 0.173  0.186
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.250    0.00451 55.5   &lt;0.001   Inf 0.241  0.259
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.232    0.01776 13.1   &lt;0.001 127.6 0.198  0.267
--- 378457 rows omitted. See ?print.marginaleffects ---
    0.208    0.00390 53.4   &lt;0.001   Inf 0.201  0.216
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.189    0.00545 34.7   &lt;0.001 874.0 0.179  0.200
Type: numeric
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> stops_pre_tbl |&gt;
  slice_sample(n = 1000) |&gt;
  mutate(zone = factor(zone)) |&gt;  # Ensures correct ordering of zones
  ggplot(aes(y = zone, x = estimate, color = race, shape = sex)) +
  geom_point(size = 2) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2) +  # horizontal error bars
  labs(
    title = "Prediction of arrested by Zone, Race, and Sex",
    subtitle = "Black and sex Male has the highest pobability of arrested",
    x = "Predicted Probability",
    y = "Zone"
  ) +
  theme_minimal(base_size = 13) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-12 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> tutorial.helpers::show_file("stops.qmd", chunk = "Last")
stops_pre_tbl |&gt;
  slice_sample(n = 1000) |&gt;
  mutate(zone = factor(zone)) |&gt;  # Ensures correct ordering of zones
  ggplot(aes(y = zone, x = estimate, color = race, shape = sex)) +
  geom_point(size = 2) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2) +  # horizontal error bars
  labs(
    title = "Prediction of arrested by Zone, Race, and Sex",
    subtitle = "Black and sex Male has the highest pobability of arrested",
    x = "Predicted Probability",
    y = "Zone"
  ) +
  theme_minimal(base_size = 13) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The predictions of being arrested show that black, male drivers have the highest probability in all zones except zone x. The highest probability of being arrested is more than 35% for black drivers in zone w with variation in perdition 32% to 38%. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The assumption that data drivers in our prediction represent the drivers in the population rest all things being constant but if our assumptions do not hold good then actual results may very as the attitude of police officer, training of drivers, wearing of safety halmets, etc may reduce chances of being arrested. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-15 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> tutorial.helpers::show_file("stops.qmd")
---
title: "Stops"
author: Naveed Ahmad
format: html
execute: 
  echo: false
---

```{r}
#| message: false
#| warning: false
library(tidyverse)
library(primer.data)
library(tidymodels)
library(broom)
library(gt)
library(marginaleffects)
library(ggplot2)
```

## Summary
&lt;div style="text-align: justify;"&gt;When stopped, the arrest of drivers may be predicted to very on some factors like race, sex, zone. In this study we will use data from the open policing project to predict the arrest of drivers by adjusting for some covariates. However, our assumptions that data is valid, stable and representative of all drivers if not proved fully, the predictions may very. Because, the divers or offcicers may have change in behavior, education, traing, and also change in zone may differ hence, our predictions about arrest may very from actual. We used logistic regression model to predict arrested as function of race, sex, and zone. The predictions of being arrested show that black, male drivers have the highest probability in all zones except zone x. The highest probability of being arrested is more than 35% for black drivers in zone w with variation in perdition 32% to 38%.&lt;/div&gt;


## Statistical Model

Since $Y$ is a binary variable (with exactly two possible values), the probability family is **Bernoulli**:

$$
Y \sim \text{Bernoulli}(\rho)
$$

where $\rho$ is the probability that one of the two possible values — conventionally referred to as 1 (or TRUE) — occurs. By definition, $1 - \rho$ is the probability of the other value.

For a binary outcome variable, we use a **log-odds model**:

$$
\log\left(\frac{\rho}{1 - \rho}\right) = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + \cdots + \beta_k X_k
$$

```{r}
#| cache: true
x &lt;- stops |&gt;
  filter(race %in% c("black", "white")) |&gt;
  mutate(race = str_to_title(race), 
         sex = str_to_title(sex))

fit_stops &lt;- linear_reg() |&gt;
    set_engine("lm") |&gt;
    fit(arrested ~ sex + race*zone, data = x)
```

## Table of Coefficients of Parameters
```{r}
#| message: false
#| warning: false
stops_tbl &lt;- tidy(fit_stops, conf.int = TRUE) |&gt;
  select(term, estimate, conf.low, conf.high) |&gt;
  mutate(across(c(estimate, conf.low, conf.high), round, 2)) |&gt;
  gt() |&gt;
  tab_header(
    title = "Coefficients with 95% Confidence Intervals"
  ) |&gt;
  cols_label(
    term = "Term",
    estimate = "Estimate",
    conf.low = "95% CI Lower",
    conf.high = "95% CI Upper"
  ) |&gt;
  fmt_number(
    columns = c(estimate, conf.low, conf.high),
    decimals = 2
  ) |&gt;
  tab_options(
    table.font.size = "small",
    table.border.top.color = "gray80",
    table.border.bottom.color = "gray80"
  )
stops_tbl
```

## Fited regression model
$$
\widehat{\text{arrested}} = 0.177 
+ 0.0614 \cdot \text{sex}_{\text{Male}} 
- 0.0445 \cdot \text{race}_{\text{White}} 
+ 0.0146 \cdot \text{zone}_{\text{B}} 
+ 0.00610 \cdot \text{zone}_{\text{C}} 
+ 0.0781 \cdot \text{zone}_{\text{D}} 
+ 0.00190 \cdot \text{zone}_{\text{E}} 
- 0.00271 \cdot \text{zone}_{\text{F}} 
+ 0.0309 \cdot \text{zone}_{\text{G}} 
+ 0.0757 \cdot \text{zone}_{\text{H}} 
+ \text{(interaction terms for race and zone)}
$$

this is our Data Generating Mechanism

```{r}
#| message: false
#| warning: false
 stops_pre_tbl &lt;- predictions(fit_stops, condition = c("sex", "race"))
```

## Plot showing prediction of arrested
```{r}
stops_pre_tbl |&gt;
  slice_sample(n = 1000) |&gt;
  mutate(zone = factor(zone)) |&gt;  # Ensures correct ordering of zones
  ggplot(aes(y = zone, x = estimate, color = race, shape = sex)) +
  geom_point(size = 2) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2) +  # horizontal error bars
  labs(
    title = "Prediction of arrested by Zone, Race, and Sex",
    subtitle = "Black and sex Male has the highest pobability of arrested",
    x = "Predicted Probability",
    y = "Zone"
  ) +
  theme_minimal(base_size = 13)
```
&gt; </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-16 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> https://naveedgill4u.github.io/stops/ </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-17 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> https://github.com/naveedgill4u/stops </td>
  </tr>
  <tr>
   <td style="text-align:left;"> minutes </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> 210 </td>
  </tr>
</tbody>
</table>
