<table>
 <thead>
  <tr>
   <th style="text-align:left;"> id </th>
   <th style="text-align:left;"> submission_type </th>
   <th style="text-align:left;"> answer </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> tutorial-id </td>
   <td style="text-align:left;"> none </td>
   <td style="text-align:left;"> 131-stops </td>
  </tr>
  <tr>
   <td style="text-align:left;"> name </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Sharjeel Jamal </td>
  </tr>
  <tr>
   <td style="text-align:left;"> email </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> sharjeeljamalg@gmail.com </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ID </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Sharjeel </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Wisdom Justice, Courage Temperance </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> show_file(".gitignore")
stop_files </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> #| message: false
library(tidyverse)
librar(primer.data) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(tidyverse)
── Attaching core tidyverse packages ───────────────────────────────────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     
── Conflicts ─────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package to force all conflicts to become errors </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> This data is from the Stanford Open Policing Project, which aims to improve police accountability and transparency by providing data on traffic stops across the United States. The New Orleans dataset includes detailed information about traffic stops conducted by the New Orleans Police Department. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The causal effect refers to the difference in outcomes between the treatment group and the control group. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The fundamental problem of causal inference is that we can only observe one outcome at a given moment in time. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> arrested as outcome variable. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Mask as an imaginary variable. People can manipulate it how they used masks to avoid arrests. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> There are two potential outcomes . People who weared mask and arrested and who did not wear and arrested . </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> People wearing mask and getting arrested , let's imaines their outcome is 9 and people who did not wear mask and arrested outcome as 3. Causal effect will be the difference between these two that is 6. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-12 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Race </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Black people who got arrested and did not wear a mask, the second could be the white people who did not wear a mask and got arrested. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> introduction-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> What racial group do most arrested individuals belong to? </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Wisdom requires the creation of a Preceptor Table, an examination of our data, and a determination, using the concept of “validity,” as to whether that the two come from the same population. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> A Preceptor Table is the smallest possible table with rows and columns such that, if none of the data is missing, then the things we want to know are easy to calculate. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Perceptor Table has units as rows, outcomes, and covariates as columns. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> White or Black motorists </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Arrested </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Race </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> This is a predictive model and there are no treatments. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> This refers to the specific moment in time when the data was collected. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The preceptor table for this problem will have motorists as units (or rows), arrested individuals as columns, and race and zone as covariate columns. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> What types of people from different age and racial groups are being arrested during traffic stops? </td>
  </tr>
  <tr>
   <td style="text-align:left;"> wisdom-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Which race of people is most often arrested during traffic stops? We used data from the American Survey Association to examine this. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Population tables, validity, stability, representativeness, and unconfoundness in causal models are five components of justice. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Validity is aboout that preceptor table and data are drawn from the same population table. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Validity may not hold if the data and preceptor table contain different races. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The population table is derived from the data, while the preceptor table is also drawn from the same source. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Both the observations and the time should be consistent throughout the entire time period in the population table. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Stability refers to consistency of data across time periods. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The assumption of stability will not hold if we run the study again and obtain different results in the case of arrested individuals. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The assumption of stability will not hold if we run the study again and obtain different results in the case of arrested individuals. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The assumption of representativeness may not hold if the data collected does not reflect the overall population, particularly in terms of whether all demographic groups are represented among those being arrested. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The assumption of representativeness may not hold if the data collected does not reflect the overall population, particularly in terms of whether all demographic groups are represented among those being arrested. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Unconfoundedness concerns the causal model. It means that treatment, if any, is independent of the outcome. The treated variable does not affect the outcome variable. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-12 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(tidymodels)
── Attaching packages ─────────────────────────────────────────────────────────────────── tidymodels 1.3.0 ──
✔ broom        1.0.8     ✔ rsample      1.3.0
✔ dials        1.4.0     ✔ tune         1.3.0
✔ infer        1.0.8     ✔ workflows    1.2.0
✔ modeldata    1.4.0     ✔ workflowsets 1.1.1
✔ parsnip      1.3.2     ✔ yardstick    1.3.2
✔ recipes      1.3.1     
── Conflicts ────────────────────────────────────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Use tidymodels_prefer() to resolve common conflicts. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(broom) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> $$
Y_i \sim \text{Bernoulli}(p_i)
$$

$$
\log\left( \frac{p_i}{1 - p_i} \right) = \beta_0 + \beta_1 X_{1i} + \beta_2 X_{2i} + \beta_3 X_{3i} + \cdots + \beta_k X_{ki}
$$ </td>
  </tr>
  <tr>
   <td style="text-align:left;"> justice-15 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> However, our model may be limited by unobserved confounding variables—such as the severity of the offense or officer discretion—that could bias the estimated effect of race on arrest outcomes </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Courage is related to understanding the mechanism that generates data. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-2 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-3 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg(engine = "lm") |&gt; 

    fit(arrested ~ sex, data = x) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-4 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg() |&gt;
  set_engine("lm") |&gt;
  fit(arrested ~ sex, data = x) |&gt;
  tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-5 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg() |&gt;
  set_engine("lm") |&gt;
  fit(arrested ~ race, data = x) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-6 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg() |&gt;
  set_engine("lm") |&gt;
  fit(arrested ~ race, data = x) |&gt;
   tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-7 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg() |&gt;
  set_engine("lm") |&gt;
  fit(arrested ~ sex + race, data = x) |&gt;
   tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-8 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> linear_reg() |&gt;
  set_engine("lm") |&gt;
  fit(arrested ~ sex + race*zone, data = x) |&gt;
   tidy(conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-9 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> fit_stops </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> x &lt;- stops |&gt;
  filter(race %in% c("black", "white")) |&gt;
  mutate(race = str_to_title(race), 
         sex = str_to_title(sex))

fit_stops &lt;- linear_reg() |&gt;
    set_engine("lm") |&gt;
    fit(arrested ~ sex + race*zone, data = x) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(easystats)
# Attaching packages: easystats 0.7.4.5 (red = needs update)
✖ bayestestR  0.16.0   ✖ correlation 0.8.7 
✖ datawizard  1.1.0    ✔ effectsize  1.0.1 
✖ insight     1.3.0    ✖ modelbased  0.11.2
✖ performance 0.14.0   ✖ parameters  0.26.0
✔ report      0.6.1    ✔ see         0.11.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> $$
\hat{Y}_i = 0.12 - 0.04 \cdot \text{Female}_i - 0.10 \cdot \text{White}_i + 0.08 \cdot \text{Downtown}_i - 0.05 \cdot (\text{White}_i \times \text{Downtown}_i)
$$ </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> x &lt;- stops |&gt;
  filter(race %in% c("black", "white")) |&gt;
  mutate(race = str_to_title(race), 
         sex = str_to_title(sex))

fit_stops &lt;- linear_reg() |&gt;
    set_engine("lm") |&gt;
    fit(arrested ~ sex + race*zone, data = x) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-15 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> stop_files

/.quarto/

*_cache
Warning message:
In readLines(path) : incomplete final line found on '.gitignore </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-16 </td>
   <td style="text-align:left;"> exercise </td>
   <td style="text-align:left;"> tidy(fit_stops, conf.int = TRUE) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-17 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> #| label: fit-logistic-model
#| cache: true

library(tidymodels)
library(dplyr)
library(knitr)

# Fit logistic regression (GLM with logit link)
fit_stops_logistic &lt;- logistic_reg() |&gt;
  set_engine("glm") |&gt;
  fit(as.factor(arrested) ~ sex + race, data = x)

# Tidy model and display clean table
tidy(fit_stops_logistic, conf.int = TRUE) |&gt;
  select(term, estimate, conf.low, conf.high) |&gt;
  mutate(across(where(is.numeric), ~round(., 3))) |&gt;
  knitr::kable(
    caption = "Logistic Regression Estimates for Arrest Probability (Source: Traffic stops dataset filtered for Black and White drivers)"
  ) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> courage-18 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> We model the likelihood of arrest during a traffic stop—coded as either arrested or not arrested—as a logistic function of driver characteristics such as race and sex </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-1 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Temperance we can create posteriors of the quantities of interest. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-2 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> A positive value of 0.016 suggests that males are more likely to be arrested.. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-3 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> It indicates that white people are less likely to be arrested. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-4 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> The estimate of 0.18 for the intercept means that the predicted probability of arrest during a traffic stop is 18% for the reference group. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-5 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(marginaleffects)
Please cite the software developers who make your work possible.
One package:             citation("package_name")
All project packages:    softbib::softbib() </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-6 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> What race, gender, and area do people belong to when they are arrested during traffic stops? </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-7 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> predictions(fit_stops)

 Estimate Std. Error    z Pr(&gt;|z|)     S 2.5 % 97.5 %
    0.179    0.00343 52.2   &lt;0.001   Inf 0.173  0.186
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.250    0.00451 55.5   &lt;0.001   Inf 0.241  0.259
    0.142    0.00419 33.8   &lt;0.001 828.0 0.133  0.150
    0.232    0.01776 13.1   &lt;0.001 127.6 0.198  0.267
--- 378457 rows omitted. See ?print.marginaleffects ---
    0.208    0.00390 53.4   &lt;0.001   Inf 0.201  0.216
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.270    0.00377 71.5   &lt;0.001   Inf 0.262  0.277
    0.189    0.00545 34.7   &lt;0.001 874.0 0.179  0.200 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-8 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> plot_predictions(fit_stops, by = "sex") </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-9 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> plot_predictions(fit_stops, condition =  "sex") </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-10 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> plot_predictions(fit_stops, condition = c("sex", "race")) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-11 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(ggplot2)

ggplot(data = plot_data, aes(x = sex, y = arrested, color = race)) +
  geom_point(position = position_dodge(width = 0.4), size = 3) +
  geom_errorbar(
    aes(ymin = arrested - se, ymax = arrested + se),
    width = 0.1,
    position = position_dodge(width = 0.4)
  ) +
  labs(
    title = "Arrest Rates by Race and Sex During Traffic Stops",
    subtitle = "Black drivers, especially males, face higher probabilities of arrest than White drivers",
    x = "Driver Sex",
    y = "Probability of Arrest",
    caption = "Source: New Orleans traffic stops dataset, filtered for Black and White drivers",
    color = "Race"
  ) +
  theme_minimal(base_size = 12) +
  scale_color_manual(values = c("Black" = "tomato", "White" = "cyan3")) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-12 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> library(ggplot2)

ggplot(data = plot_data, aes(x = sex, y = arrested, color = race)) +
  geom_point(position = position_dodge(width = 0.4), size = 3) +
  geom_errorbar(
    aes(ymin = arrested - se, ymax = arrested + se),
    width = 0.1,
    position = position_dodge(width = 0.4)
  ) +
  labs(
    title = "Arrest Rates by Race and Sex During Traffic Stops",
    subtitle = "Black drivers, especially males, face higher probabilities of arrest than White drivers",
    x = "Driver Sex",
    y = "Probability of Arrest",
    caption = "Source: New Orleans traffic stops dataset, filtered for Black and White drivers",
    color = "Race"
  ) +
  theme_minimal(base_size = 12) +
  scale_color_manual(values = c("Black" = "tomato", "White" = "cyan3")) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-13 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> For example, our logistic regression estimates that Black male drivers have approximately a 3.1 percentage point higher probability of being arrested compared to White male drivers, with a 95% confidence interval ranging from 1.2 to 5.0 percentage points. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-14 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> Estimates may be inaccurate due to data inconsistencies or unrepresentative sampling. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-15 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> tutorial.helpers::show_file("stops.qmd")
---
title: "Stops"
format: html
execute: 
  echo: false
---

```{r}
#| message: false
library(tidyverse) 
library(primer.data)
library(tidymodels)
library(broom)
library(marginaleffects)
```


```{r}
#| cache: true
 x &lt;- stops |&gt;
  filter(race %in% c("black", "white")) |&gt;
  mutate(race = str_to_title(race), 
         sex = str_to_title(sex))
fit_stops &lt;- linear_reg() |&gt;
    set_engine("lm") |&gt;
    fit(arrested ~ sex + race*zone, data = x)
```

```{r}
#| label: fit-logistic-model
#| cache: true

library(tidymodels)
library(dplyr)
library(knitr)

# Fit logistic regression (GLM with logit link)
fit_stops_logistic &lt;- logistic_reg() |&gt;
  set_engine("glm") |&gt;
  fit(as.factor(arrested) ~ sex + race, data = x)

# Tidy model and display clean table
tidy(fit_stops_logistic, conf.int = TRUE) |&gt;
  select(term, estimate, conf.low, conf.high) |&gt;
  mutate(across(where(is.numeric), ~round(., 3))) |&gt;
  knitr::kable(
    caption = "Logistic Regression Estimates for Arrest Probability (Source: Traffic stops dataset filtered for Black and White drivers)"
  )
```


$$
Y_i \sim \text{Bernoulli}(p_i)
$$

$$
\log\left( \frac{p_i}{1 - p_i} \right) = \beta_0 + \beta_1 X_{1i} + \beta_2 X_{2i} + \beta_3 X_{3i} + \cdots + \beta_k X_{ki}
$$


## Fitted Linear Model

$$
\hat{Y}_i = 0.12 - 0.04 \cdot \text{Female}_i - 0.10 \cdot \text{White}_i + 0.08 \cdot \text{Downtown}_i - 0.05 \cdot (\text{White}_i \times \text{Downtown}_i)
$$

```{r}
library(dplyr)

# Summary table with mean and standard error by sex and race
plot_data &lt;- x |&gt;
  group_by(sex, race) |&gt;
  summarize(
    arrested = mean(arrested),
    se = sd(arrested) / sqrt(n()),  # Standard error = SD / sqrt(n)
    .groups = "drop"
  )

```

```{r}
library(ggplot2)

ggplot(data = plot_data, aes(x = sex, y = arrested, color = race)) +
  geom_point(position = position_dodge(width = 0.4), size = 3) +
  geom_errorbar(
    aes(ymin = arrested - se, ymax = arrested + se),
    width = 0.1,
    position = position_dodge(width = 0.4)
  ) +
  labs(
    title = "Arrest Rates by Race and Sex During Traffic Stops",
    subtitle = "Black drivers, especially males, face higher probabilities of arrest than White drivers",
    x = "Driver Sex",
    y = "Probability of Arrest",
    caption = "Source: New Orleans traffic stops dataset, filtered for Black and White drivers",
    color = "Race"
  ) +
  theme_minimal(base_size = 12) +
  scale_color_manual(values = c("Black" = "tomato", "White" = "cyan3"))




```

#**Summary Paragraph**
Disparities in policing outcomes across racial groups continue to raise concern, especially regarding how race and location affect the chances of arrest during traffic stops. To explore this, we analyze data from a study of drivers in New Orleans to examine how a driver's race relates to their likelihood of being arrested.However, our model may be limited by unobserved confounding variables—such as the severity of the offense or officer discretion—that could bias the estimated effect of race on arrest outcomes.We model the likelihood of arrest during a traffic stop—coded as either arrested or not arrested—as a logistic function of driver characteristics such as race and sex.For example, our logistic regression estimates that Black male drivers have approximately a 3.1 percentage point higher probability of being arrested compared to White male drivers, with a 95% confidence interval ranging from 1.2 to 5.0 percentage points. </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-16 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> https://Sharjeel46.github.io/Stops/ </td>
  </tr>
  <tr>
   <td style="text-align:left;"> temperance-17 </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> https://github.com/Sharjeel46/Stops </td>
  </tr>
  <tr>
   <td style="text-align:left;"> minutes </td>
   <td style="text-align:left;"> question </td>
   <td style="text-align:left;"> 200 </td>
  </tr>
</tbody>
</table>
