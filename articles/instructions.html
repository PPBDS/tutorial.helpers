<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tutorial.helpers">
<title>Instructions for Writing R Tutorials • tutorial.helpers</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Instructions for Writing R Tutorials">
<meta property="og:description" content="tutorial.helpers">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tutorial.helpers</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.7.9008</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/downloads.html">Enable Students to Download Their Tutorial Answers</a>
    <a class="dropdown-item" href="../articles/instructions.html">Instructions for Writing R Tutorials</a>
    <a class="dropdown-item" href="../articles/books.html">Tutorials for Books</a>
    <a class="dropdown-item" href="../articles/addins.html">Rstudio Addins</a>
    <a class="dropdown-item" href="../articles/cloud.html">Using Tutorials with Posit Cloud</a>
    <a class="dropdown-item" href="../articles/testing.html">Testing Your Package of Tutorials</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/PPBDS/tutorial.helpers/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Instructions for Writing R Tutorials</h1>
                        <h4 data-toc-skip class="author">David Kane</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PPBDS/tutorial.helpers/blob/HEAD/vignettes/instructions.Rmd" class="external-link"><code>vignettes/instructions.Rmd</code></a></small>
      <div class="d-none name"><code>instructions.Rmd</code></div>
    </div>

    
    
<p><em>There are no questions here. There are only simple
instructions.</em></p>
<p><em>Tutorials are not challenging. They are
confidence-building.</em></p>
<p><em>Every word matters. Never waste a student’s time.</em></p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document describes the best way to write R tutorials using the
<a href="https://rstudio.github.io/learnr/" class="external-link"><strong>learnr</strong></a>
package. The most common use case is a tutorial which covers <a href="https://ppbds.github.io/tutorial.helpers/articles/books.html">the
material in an assigned textbook</a>, as with the <a href="https://CRAN.R-project.org/package=r4ds.tutorials" class="external-link"><strong>r4ds.tutorials</strong></a>
package for <a href="https://r4ds.hadley.nz/" class="external-link"><em>R for Data Science
(2e)</em></a> by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett
Grolemund..</p>
<p>Instructors assign textbook readings to students. We want our
students to read and, perhaps more importantly, go through the
associated code, typing it in and confirming what it does. Sadly,
students almost never do so. Fortunately, the <a href="https://CRAN.R-project.org/package=tutorial.helpers" class="external-link"><strong>tutorial.helpers</strong></a>
package provides tools for ensuring that students type in all the
assigned code.</p>
<p>Imagine the <em>shallowest</em> possible learning curve. Almost every
student should be able to answer almost every Exercise, albeit perhaps
with the help of a Hint. There are no hard questions. In fact, there
really aren’t any <em>questions</em> at all. Instead, there are
<em>instructions</em>: Do one thing, then the next, and then the
next.</p>
<p>Assume that you are giving the student a private lesson. You ask them
a question. They give you an answer. What would you say to them next?
What do you want to teach them, given that context?</p>
<p>There are a million little bits of R (or statistics or data science
or . . .) knowledge which we might provide to students: tips, tricks,
cool packages, fun websites, et cetera. We don’t have time to mention
all of them. The art of teaching is to, first, decide which 10,000 bits
are the most important to mention and second, figure out the best time
at which to mention them. Tutorials provide an occasion for that
mentioning. Which bits do we mention and where do we mention them?</p>
<p>We can only demonstrate a tiny percentage of all the packages in the
world, but we can certainly at least mention the existence of dozens
more. Within the packages we use, we can only illustrate some of the
functions; but we can examine some of the other important ones. Among
the functions we use, we can only show some of the arguments; but we can
discuss others.</p>
<p>The most important parts of the “knowledge drops” with which we
pepper these tutorials are, first, the packages/functions/arguments
which we mention without demonstrating, and second, links to high
quality resources.</p>
<p>We are building a “<a href="https://ricomariani.medium.com/the-pit-of-success-cfefc6cb64c8" class="external-link">pit
of success</a>.” Generally, students don’t do the assigned reading, at
least in a large class. However, they will complete required work. They
will do the assigned tutorials. <em>Our promise: If you complete the
tutorials, you will learn the material. There is simply no way not
to.</em></p>
</div>
<div class="section level2">
<h2 id="set-up">Set Up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h2>
<p>Tutorials themselves live in a directory within
<code>inst/tutorials</code> in whichever package you are working on. We
recommend that this directory name be a combination of a prefix number
(which indicate the week/chapter with which a tutorial is associated
and/or the order in which to do it) and a name, which corresponds to the
<code>id</code> of the tutorial. Within each directory is an R Markdown
file and, sometimes, other material like an <code>images</code> or
<code>data</code> directory. The prefix number determines the order in
which tutorials appear in the Tutorial tab. By default, we name the R
Markdown file <code>tutorial.Rmd</code>, but any name works as long as
the file has the appropriate YAML header.</p>
<p>To create a new tutorial, use
<code>File -&gt; New File -&gt; R Markdown...</code>. Choose the “From
Template” option and then select “Helpers Tutorial” from the
<strong>tutorial.helpers</strong> package. Follow the instructions.</p>
<p>The <code>id</code> value is important. It should be the same as the
directory in which the tutorial is located, but with any leading numbers
removed. It is used for the name of the answer file which students save
at the end of the tutorial.</p>
<p>Note that tutorials must be <a href="https://rmarkdown.rstudio.com/" class="external-link">R Markdown</a> documents, meaning
that their suffix is <code>.Rmd</code>. You can not (yet) use Quarto
documents with tutorials. Fortunately, most of what you need which works
in Quarto also works in R Markdown. The main difference is that code
chunk options appear within the <code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code>. Don’t worry about this
detail. Just use the provided RStudio addin tools.</p>
<p>There is a <code>setup</code> code chunk at the top of a tutorial.
You must have <code><a href="https://rstudio.github.io/learnr/" class="external-link">library(learnr)</a></code> and, if you use our tools,
<code><a href="https://ppbds.github.io/tutorial.helpers/">library(tutorial.helpers)</a></code> in this chunk. Our template also
provide useful settings for various options.</p>
<p><strong>Warning</strong>: You must ensure that any library used in
the tutorial is explicitly loaded in this setup chunk. Almost every
tutorial makes use of functions from the <strong>tidyverse</strong>
package, so be sure to load this. Unfortunately, nothing in our test
suite captures the common error of using library X in the tutorial code
and forgetting to load it in the setup chunk.</p>
<p>If your tutorials are part of an R package, then you should ensure
that <strong>tutorial.helpers</strong> is included under Imports and
that any library loaded in a tutorial is, at least, included under
Suggests.</p>
</div>
<div class="section level2">
<h2 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h2>
<p>The beginning of every tutorial includes the
<code>copy-code-chunk</code> and the <code>info-section</code> code
chunks. The tutorial is then divided into different <em>Sections</em>
that appear as side panels. The first section is the “Introduction” and
the last is the “Summary”.</p>
<p>Within the Sections, other than the Introduction and Summary, there
are a series of <em>Exercises</em> which can include writing code or
writing text. At the end of the tutorial, there is a
<code>download-answers</code> code chunk which provides students with
instructions on how to download a copy of their answers.</p>
<p>The Introduction section is two to four sentence about the main
topics covered in the tutorial. Why are we here? What will students get
out of giving you 90 minutes of their lives? What functions/techniques
will they learn?</p>
<p>The Summary section is two to four sentences which bring the lessons
of the tutorial together for the student. What do they know now that
they did not know before? What are the most important
functions/techniques covered? This should be very similar to the
Introduction. You made a promise as to what they would learn. You kept
that promise.</p>
<p>If there are one or two other key resources about the topic of the
tutorial, then those resources should be mentioned somewhere in the
tutorial and also in the Summary.</p>
<p>Anything typed at the keyboard belongs in `backticks` (not “quotation
marks”), except for package names, which are always
<strong>bolded</strong>. Function names always include the parentheses:
<code>read_csv()</code>, not <code>read_csv</code>. Example: the
<code>+</code> sign is used to connect <code>ggplot()</code> components
when using the <strong>ggplot2</strong> library.</p>
<p>Ensure that the first few questions always require students to load
any libraries which are used in the tutorial. That is, look at all the
libraries you load in the set up chunk. (Try not to have too many of
them.) All of them, except for <strong>learnr</strong> and
<strong>tutorial.helpers</strong> merit an exercise which requires the
student to type <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(package.name)</a></code>. This ensures that
students get in the practice of loading libraries. And it also provides
occasion to drop some knowledge. Don’t forget that all libraries you
load should be included in the DESCRIPTION file — if the tutorial is
part of a package — probably under Suggests.</p>
</div>
<div class="section level2">
<h2 id="sections">Sections<a class="anchor" aria-label="anchor" href="#sections"></a>
</h2>
<p>Tutorials are divided into <em>Sections</em> that appear on the side
panel. To create these sections, we include a double hash (##) before
the text for it to show up as a side panel. This is also called the
<em>Section Title</em>. Use <a href="https://apastyle.apa.org/style-grammar-guidelines/capitalization/sentence-case" class="external-link">sentence
case</a>. On the line after the Section Title, put three hashes. This
ensures that students will see the introductory text before they see the
first Exercise.</p>
<p>Each Section begins with a sentence or two about what this group of
Exercises is trying to accomplish. Example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">## Interacting with sites with `GET()`</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>###</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>In order to get data from an API, we use the **httr** package. The package is designed to imitate standard HTTP in R. Read more about HTTP <span class="co">[</span><span class="ot">here</span><span class="co">](https://www.jmarshall.com/easy/http/)</span>.</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">### Exercise 1</span></span></code></pre></div>
<p>The link will be formatted correctly once the tutorial is knitted.
Section introductions will often have two parts: the introductory text
as above and a plot which will be replicated in that section of the
tutorial. Those two parts are generally separated by a triple hash.</p>
<p>After the last Exercise in a Section, you should put a triple hash
and then give a two sentence summary about what this Section
accomplished. A Section is a 20 minute transfer of knowledge from you to
the student. At the beginning, you mentioned its purpose. Conclude by
tying things back to that original purpose. Often, these “purposes” will
be fairly trivial: You promised to go through an example of a scatter
plot and, in fact, you did. And that is OK! We are not writing poetry.
Not every Section leads to salvation.</p>
<p>One or two high quality links, specifically relevant to this Section,
should be included/explained at either the beginning or end of a
Section, unless the Section is very short.</p>
</div>
<div class="section level2">
<h2 id="exercises">Exercises<a class="anchor" aria-label="anchor" href="#exercises"></a>
</h2>
<p>Each Section is composed of a series of numbered Exercises.</p>
<div class="section level3">
<h3 id="flow">Flow<a class="anchor" aria-label="anchor" href="#flow"></a>
</h3>
<p>Each Exercise should have a <em>flow</em> which requires that
students hit the “Continue” button at least once.</p>
<ul>
<li><p>Begin with a <em>Start</em> which is a sentence or two of
knowledge and/or the question itself. If the length of the Start text is
longer than one or two lines, then do not place the question code chunk
in the same part. Instead, the Start includes a triple hash, thereby
creating the Continue button. If the length of the text is short enough
that students are willing to read it (at most two sentences), you can
include the Exercise code chunk in the same part.</p></li>
<li><p>Most of the time there is no need for a triple hash before the
Exercise code chunk.</p></li>
<li><p>Do not expect students to read more than two sentences of text at
a time. After two sentences, you almost always want to use a triple hash
in order to create a Continue button so that students have a break. They
won’t read more than two sentences without a break.</p></li>
<li>
<p>After the Start, come three code chunks:</p>
<ul>
<li>The Exercise code chunk is the location in which students will place
their answers. It always includes the <code>exercise = TRUE</code> code
chunk option.</li>
<li>The Hint code chunk includes any hints for the students. The code
chunk name is the hint is always exactly the same as the one for the
Exercise code chunk, except with <code>-hint-n</code> attached at the
end. The <code>n</code> is replaced by the number of the hint. Almost
always, there is only one hint, so the suffix is <code>-hint-1</code>.
We always set <code>eval = FALSE</code> in the Hint code chunk since,
often, the hint will not be legal R code.</li>
<li>The Test code chunk has exactly the label as the one for the
Exercise code chunk, except with <code>-test</code> attached at the end.
It always includes the <code>include = FALSE</code> code chunk option
because we never want to show the code or the results to students.
Instead, the purpose of the Test code chunk is to ensure that the
correct answer — that is, the code we want students to enter into the
Exercise code chunk — works.</li>
</ul>
</li>
<li><p>The three code chunks are always followed by a triple hash. We
want students to pause after they have submitted their answers so that
they are more likely to consider the output from their submission before
moving on.</p></li>
<li><p>The last part of an Exercise is the End, our main opportunity to
drop some knowledge. See the <a href="#kd">Knowledge Drops</a> section
for extensive discussion.</p></li>
<li><p>The last part of the Section is another knowledge drop. It is not
another Exercise. It is just a knowledge drop after the last Exercise
which tries to take a broader overview. It is often separated from that
last Exercise by a simple <code>###</code>. Again, this can’t be more
than a sentence or two. But it should be more substantive than a simple
“Good job.” Recall the 10,000 items which we want to mention. For
example, if the Section has involved creating a scatter plot, then the
last Exercise will be putting the final touches on that scatter plot.
The knowledge drop should be something about scatter plots in general,
not a minor point about the particular scatter plot which the student
has just created.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="question-types">Question types<a class="anchor" aria-label="anchor" href="#question-types"></a>
</h3>
<p>To create the Exercise headers, you use three hashes. Make sure you
number your exercises – <code>### Exercise 1</code>,
<code>### Exercise 2</code> and so on.</p>
<p>There are two main types of questions. First, we have normal
<em>coding</em> questions. Students write code and press the Run Code
button. Second, we have <em>text</em> questions which require students
to either write prose or to copy/paste the results of running specific
commands. Prose is needed for questions like “Explain the meaning of
potential outcomes.” Copy/paste situations arise when students are
instructed to do something like connect to Github or edit a qmd. We
confirm that the students have completed these questions by having them
issue a command like <code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files()</a></code> and then copy/pasting the
command and the output. We often abbreviate those instruction using
CP/CR, which stands for <strong>c</strong>opy and <strong>p</strong>aste
the <strong>c</strong>ommand and the <strong>r</strong>esult.</p>
<div class="section level4">
<h4 id="code-questions">Code questions<a class="anchor" aria-label="anchor" href="#code-questions"></a>
</h4>
<p>Here is an example code question:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="do">### Exercise 2</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>Start your code with <span class="st">`</span><span class="at">cces</span><span class="st">`</span>. Use the pipe operator <span class="st">`</span><span class="at">|&gt;</span><span class="st">`</span> to add the </span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="cf">function</span> <span class="st">`</span><span class="at">filter()</span><span class="st">`</span>, selecting the  rows where <span class="st">`</span><span class="at">state</span><span class="st">`</span> is equal to </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="st">"Massachusetts"</span>. To set something equal to a value <span class="cf">in</span> <span class="st">`</span><span class="at">filter()</span><span class="st">`</span> </span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>use two equal signs<span class="sc">:</span> <span class="st">`</span><span class="at">==</span><span class="st">`</span>.</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="st">```</span><span class="at">{r filter-2, exercise = TRUE}</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="st">```</span><span class="at">{r filter-2-hint-1, eval = FALSE}</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="at">cces |&gt; </span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">  filter(state == "...")</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="st">```</span><span class="at">{r filter-2-test, include = FALSE}</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="at">cces |&gt; </span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="at">  filter(state == "Massachusetts")</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="do">### </span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="st">`</span><span class="at">==</span><span class="st">`</span> is used because it is <span class="sc">**</span>checking<span class="sc">**</span> whether the value of the </span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>variable on the left is equal to the value on the left. See </span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>[here](https<span class="sc">:</span><span class="er">//</span>stat.ethz.ch<span class="sc">/</span>R<span class="sc">-</span>manual<span class="sc">/</span>R<span class="sc">-</span>devel<span class="sc">/</span>library<span class="sc">/</span>base<span class="sc">/</span>html<span class="sc">/</span>Comparison.html) </span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="cf">for</span> discussion of other relational operators <span class="cf">in</span> R.</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>A single equation symbol, <span class="st">`</span><span class="at">=</span><span class="st">`</span>, is used to set something equal to </span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>something else. </span></code></pre></div>
<p>First, the Start of the Exercise sets the stage. It sometimes teaches
something new, connects to a previous Exercise, provides a useful link,
whatever. If it is long enough, it is followed by a triple hash. If not,
the text continues to the instruction. Most of the time, as above, there
is only the instruction, telling the student, step-by-step, what to
do.</p>
<p>Second, the instruction requires that students write some code. Good
instructions generate results when the student presses Run Code.
Tutorial answers should require the smallest incremental number of
characters, relative to the last question, for students to type. That is
one way you know that your learning curve is shallow. If a Exercise code
chunk requires the students to type a lot of characters, you should
split up the Exercise into multiple separate Exercises.</p>
<p>Third, any Exercise which requires the copying of code from the prior
Exercise should place the <em>Copy previous code</em> button below the
Exercise code chunk.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> onclick </span><span class="op">=</span> <span class="st">"transfer_code(this)"</span><span class="dt">&gt;</span>Copy previous code<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Fourth, tutorials should be so simple that 95% of the students can
answer 95% of the questions easily. One way to ensure that is to add a
<em>Hint</em> to almost every coding question.</p>
<p>Hints must always have the same code chunk name as the exercise chunk
for which they are the hint, with a “-hint-n” added at the end. So, if
an Exercise code chunk is named “ex-1”, then the hint associated with
that exercise is named “ex-1-hint-1”. A second hint for that same
question would be named “ex-1-hint-2”, and so on.</p>
<p>When you create a hint, always use <code>eval = FALSE</code> within
the parentheses in the code chunk. This is because hints will often
include “…” and other symbols which do not run as correct R code. So, we
need to tell R not to run it or an error will occur during
<code>R CMD check</code>. Example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="st">```</span><span class="at">{r ex-1-hint-1, eval = FALSE}</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="at">This is an example hint. Normally sentences like these </span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">would cause an error in R because it is not proper code. </span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">However, since we include eval = FALSE in the r-chunk, </span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="at">R ignores all errors!</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p><strong>You need to wrap the text in a long hint by hand, inserting
the carriage returns yourself.</strong> R will not wrap the text
automatically.</p>
<p>Often, hints look like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="st">```</span><span class="at">{r ex-1-hint-2, eval = FALSE}</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">... |&gt; </span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">  filter(year = ...) |&gt; </span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">  ...(flights)</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>The “…” indicates places where the student needs to insert some code,
a value or a function name. The code in hints should be formatted
correctly.</p>
<p>Students can not see the first hint after clicking through to the
next hint. So, make sure the last hint is the one you most want them to
have access to, i.e., the one which provides the key information. If
students can see the last hint, they should have no reason to consult
any earlier hints. We rarely provide more that one hint.</p>
<p>Hints are <a href="https://forum.posit.co/t/hints-in-written-questions/108184" class="external-link">only
allowed</a> for coding questions, <strong>not for text
questions</strong>.</p>
<p>Fifth, the third code chunk, after the Exercise and Hint code chunks,
is the Test code chunk. Place the answer — the code which you want
students to enter into the Exercise code chunk — into the Test code
chunk. Since the Test code chunk will be evaluated with the tutorial is
knitted (which also happens during testing), this guarantees that
correct answer will work for students.</p>
<p>Indeed, the workflow for writing an Exercise often begins by, first,
entering the code which we want students to provide into the Test code
chunk. We then copy/paste that same code into the Hint code chunk,
replacing some of the functions and/or arguments with <code>...</code>
as appropriate. We then ask the question which, we hope, will cause
students to answer with the same code as we have in the Test code
chunk.</p>
<p>There are some instances in which we can’t test code which we want
students to use. The most common case is code which requires the web,
generally for downloading data. In that case, we delete the Test code
chunk.</p>
<p>Sixth, we separate the code chunks from the End of the Exercise by
using <code>###</code> again.</p>
<p>For simple questions which result in a display of some data, one
approach is to write “You should see that the value of height in row 1
is 23.” This allows the students to know that they are on the right
track. Never hard-code a number. Use R to inline calculate it, even
though this can be a bother.</p>
<p>But, much more common, is to use the End to drop some knowledge,
especially about a function which was used in the answer to this
Exercise, or to one of the previous Exercises in this Section.</p>
<p>Note that we provide as many Exercises as possible. For example,
every tutorial features a question for each package which must be
loaded. We require students to type in items like
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code> even though they have done so many times
in the past. Every Exercise is another opportunity to make the learning
curve as shallow as possible and to drop some knowledge. More questions
are better than fewer.</p>
<p>One way to measure the shallowness of the learning curve is to
examine how many new characters each Exercise requires for its answer.
Better three Exercises, each of which loads a different package, then
one Exercise which loads three packages at once.</p>
</div>
<div class="section level4">
<h4 id="text-questions">Text questions<a class="anchor" aria-label="anchor" href="#text-questions"></a>
</h4>
<p>There are two types of text questions: 1) those that provide the
students with the correct answer, after they have submitted their own
answer, and, 2) those that do not provide an answer. Examples:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="do">### Exercise 6</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>Explain potential outcomes <span class="cf">in</span> about two sentences.</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="st">```</span><span class="at">{r definitions-6}</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="at">question_text(NULL,</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="at">    message = "This is where we place the correct answer. It will appear only after </span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="at">    students have submitted their own answers. Note that we do not need to wrap the </span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="at">    answer text by hand.",          </span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="at">    answer(NULL, </span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="at">           correct = TRUE),</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="at">    allow_retry = FALSE,</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="at">    incorrect = NULL,</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="at">    rows = 6)</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="st">```</span> </span></code></pre></div>
<p>For the <code>message</code> argument, you should provide an
<strong>excellent</strong> answer. We want to allow students to check
for themselves that they got, more or less, the correct answer. Note how
we set <code>allow_retry</code> to FALSE. This means that, after they
see our answer, students can’t modify their answer. The
<code>rows</code> argument decides how many rows the empty text input
will have.</p>
<p>Always specify (approximately) how much you want students to write.
Reasonable units are: one sentence, two sentences and a paragraph. Pick
one of these three unless you have a good reason not to.</p>
<p>For paragraph questions, you should mention specific words or phrases
which the students should include in their answers. If your suggested
answer includes the word “validity,” for example, then tell the students
to include (and define) validity as part of their answer.</p>
<p>However, for many written questions, we don’t provide an answer, so
we don’t mind if students resubmit. In that case, we use</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="do">### Exercise 7</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>From the Console, run <span class="st">`</span><span class="at">list.files()</span><span class="st">`</span>. CP<span class="sc">/</span>CR.</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="st">```</span><span class="at">{r file-creation-7}</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="at">  question_text(NULL,</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="at">    answer(NULL, correct = TRUE),</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="at">    allow_retry = TRUE,</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="at">    try_again_button = "Edit Answer",</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">    incorrect = NULL,</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="at">    rows = 3)</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>This format is most commonly used for “process” questions in which we
have told students to do something and then confirm that they have done
it by copying/pasting the result from a command.</p>
</div>
</div>
<div class="section level3">
<h3 id="tips">Tips<a class="anchor" aria-label="anchor" href="#tips"></a>
</h3>
<p>Each coding exercise should always spit out something. Interactivity
is good! Students should always look at what their code is producing.
There are some situations in which students need to make assignments and
which, because of this, will result in no output when the Run Code
button is pressed. But:</p>
<ul>
<li><p>Do this as little as possible. Why not just make a pipe?</p></li>
<li><p>When you do this, you will need to create the permanent object
yourself because student work in an Exercise code chunk has no lasting
effects. Doing so is annoying and error prone.</p></li>
<li><p>You can have the student not only do the assignment but also, as
part of this same exercise, print out the object. This works
well.</p></li>
</ul>
<p>Follow a coding <a href="https://style.tidyverse.org/" class="external-link">Style
Guide</a>, especially spaces around operators like ” = “. Use only one
command per line in pipes and graphics, with proper indentation. Indent
plotting commands after the call to <code>ggplot()</code>.</p>
<p>Do not create an object in one question and then assume that it will
be available in subsequent questions. It won’t be! Each question is
independent of every other question. They live in separate R instances.
The only exception (which we make use of) is that objects created in the
initial <code>setup</code> chunk for the entire tutorial are available
in all later questions, just the way that <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>
commands executed there do not need to be executed again.</p>
<p>Tutorials are knitted/run from the directory in which they are
located. So, if you want to read in a file from a <code>data/</code>
directory, you write:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/myfile.csv"</span><span class="op">)</span></span></code></pre></div>
<p>in an R code chunk, presumably in the global <code>setup</code>
chunk. But, if you try to execute that line of code with
<code>Command + Return</code>, it will fail because, by default, you are
located in the main directory of <strong>your.package</strong> when you
start working on your tutorials. Using <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> will solve
this problem.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="at">&gt; getwd()</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">[</span><span class="ot">1</span><span class="co">]</span><span class="at"> "/Users/davidkane/Desktop/projects/r4ds.tutorials"</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="at">&gt; setwd("inst/tutorials/031-data-files/")</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="at">&gt; getwd()</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">[</span><span class="ot">1</span><span class="co">]</span><span class="at"> "/Users/davidkane/Desktop/projects/r4ds.tutorials/inst/tutorials/031-data-files"</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="at">&gt; </span></span></code></pre></div>
<p><code>Command + Return</code> will now work because your R session is
“located” in the same location as that from which the tutorial will be
run when it is knitted.</p>
</div>
<div class="section level3">
<h3 id="pipes">Pipes<a class="anchor" aria-label="anchor" href="#pipes"></a>
</h3>
<p>The most common type of code questions involve the step-by-step
process of building a pipe, the final output of which is a nice looking
graphic.</p>
<p>You want to first show the graphic that you will create by the end of
the Section. You show it once at the start of the Section and once
before the last Exercise, as a reminder of what the graphic should look
like so students do not need to scroll all the way back up.</p>
<p>You should put the code for the graph in the code chunk at the start
of the Section. Save the code to an object. The name of the object
should have a “_p” suffix, where the “p” stands for “plot.” This way,
you only have to put the object name in the code chunk at the end of the
Section rather than copying the code.</p>
<p>You then build up the graphic, line by line, over a series of
Exercises, providing hints along the way.</p>
</div>
<div class="section level3">
<h3 id="knowledge-drops">Knowledge Drops<a id="kd"></a><a class="anchor" aria-label="anchor" href="#knowledge-drops"></a>
</h3>
<p>The most difficult part of tutorial creation is writing the
“knowledge drops,” the snippets of wisdom (and the associated links)
which are used at the End of each Exercise. Some advice:</p>
<ul>
<li><p>Do not expect this to be easy! Good knowledge drops are
hard.</p></li>
<li><p>Make them short. Students will not read more than a sentence or
two.</p></li>
<li>
<p>Not sure what knowledge to drop? Look up the help page for one of
the functions used in the Section. Ideally, this will be the function
which was used in this Exercise, but it can be one used a few lines
above. The help page will have two areas of interest:</p>
<ul>
<li>Arguments for the function, some of which will not have been used in
the Section but which are still worth mentioning. A good knowledge drop
will mention this argument and describe when it might be useful.</li>
<li>Related functions. For example, use the “Useful filter functions”
section of the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">?dplyr::filter</a></code> help page. All of these make
for good knowledge drops! Another example is the “See also” section of
the <code>?arrange</code> help page. We can’t possibly use every R
function in an Exercise, but we can at least describe some of them in
knowledge drops.</li>
</ul>
</li>
<li>
<p>Use high quality links.</p>
<ul>
<li>The second edition of <a href="https://r4ds.hadley.nz/" class="external-link"><em>R for
Data Science</em></a> is amazing. Link to it as often as you can.</li>
<li>Anything associated with <a href="https://posit.co/" class="external-link">Posit</a>
(formerly named RStudio) is high quality. Examples include sites
associated with <a href="https://www.tidyverse.org/" class="external-link">Tidyverse</a> and
<a href="https://www.tidymodels.org/" class="external-link">Tidymodels</a>.</li>
</ul>
</li>
<li><p>Avoid links to low quality sites like
<code>https://rdrr.io/</code> ,
<code>https://www.rdocumentation.org/</code>, and
<code>https://www.datamentor.io/</code>. Any site which uses ads should
be avoided.</p></li>
<li>
<p>Links to function documentation is useful. Indeed, we should link
at least once to the documentation for every function which we use. Two
categories:</p>
<ul>
<li>Links to the help pages for base function are tricky. It is not
clear to me which location is the best to use for this purpose. My
suggestion is to use links involving the <code>stat.ethz.ch</code>
server, which is the home base (I think) for the core R developers.
Consider examples for <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/cut.html" class="external-link"><code>cut()</code></a>
and <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/print.html" class="external-link"><code>print()</code></a>.</li>
<li>Links to functions from the <em>Tidyverse</em> should use the docs
maintained by Posit. Consider these examples for <a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link"><code>arrange()</code></a>
and <a href="https://tidyverse.github.io/ggplot2-docs/reference/aes.html" class="external-link"><code>aes()</code></a>.</li>
</ul>
</li>
<li><p>One common approach is like this:</p></li>
</ul>
<pre><code>See `?readr::locale` for [details](https://readr.tidyverse.org/articles/locales.html).</code></pre>
<p>Note how we concisely provide both the command which brings up the
help page and a link to the help page itself.</p>
<p>Think back to our initial discussion of the 10,000 pieces of
information which we want to mention at some point. Among these are many
pages linked to from the help pages for the core <em>Tidyverse</em>
functions, like <code>arrange()</code> and <code>aes()</code>.</p>
<!-- DK: Everything below is worth re-writing. -->
</div>
</div>
<div class="section level2">
<h2 id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a>
</h2>
<p>In addition to <code>tutorial.Rmd</code>, a tutorial will often use
other inputs. The two most common locations for storing these inputs are
<code>data</code> and <code>images</code> directories at the same level
as the <code>tutorial.Rmd</code> file. Any file in <code>data</code> or
<code>images</code> will be available at run time. (Note that the
directories must have these names. Something like <code>my_data</code>
will not work.)</p>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>If you need for an R object to be accessible in an Exercise code
chunk, create it in the initial global <code>setup</code> code chunk at
the top of the tutorial.</p>
<!-- Objects created in a code chunk which is then referenced by using the exercise.setup code chunk option in any Exercise which needs access to these objects. -->
<p>Be wary code which downloads data from the web. This won’t work if
the student does not have an internet connection when she creates the
tutorial. Instead, save the code which downloaded the data and then
place that object in an RDS file in the <code>data</code> directory.
Here is an example from the “Wrangling Census data with tidyverse tools”
tutorial from the <a href="https://ppbds.github.io/tidycensus.tutorials/" class="external-link"><strong>tidycensus.tutorials</strong></a>
package.</p>
<pre><code><span><span class="va">median_age</span> <span class="op">&lt;-</span> <span class="fu">get_acs</span><span class="op">(</span>geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>                      variables <span class="op">=</span> <span class="st">"B01002_001"</span>,</span>
<span>                      year <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span></span>
<span><span class="fu">write_rds</span><span class="op">(</span><span class="va">median_age</span>, <span class="st">"data/median_age.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">median_age</span> <span class="op">&lt;-</span> <span class="fu">read_rds</span><span class="op">(</span><span class="st">"data/median_age.rds"</span><span class="op">)</span></span></code></pre>
<p>The first two commands download data and save it to an RDS file in
the <code>data</code> directory.</p>
<p>This code assumes that you are located in the same directory as the
<code>tutorial.Rmd</code> file. You only run those commands once, and
then you comment them out because you don’t want them re-run each time
the tutorial is created. The <code>read_rds()</code> call is never
commented out because we always need the <code>median_age</code>
object.</p>
<p>When designing tutorials which use objects like
<code>median_age</code>, we generally write two Exercise code chunks.
The first has the student run the same code as that which we used to
create the object ourselves. This won’t work if the student is not
connected to the web but, with luck, in that case they will get a
sensible error message. The second question informs the students that we
have, behind the scenes, assigned the result of the function to an R
object. We then ask the student to just print out that object. We don’t
have them do the assignment themselves, not least because we don’t like
questions which don’t generate any output.</p>
<p>We use a similar approach with models which can take awhile to fit.
Example:</p>
<pre><code><span><span class="va">fit_gauss</span> <span class="op">&lt;-</span> <span class="fu">brm</span><span class="op">(</span>formula <span class="op">=</span> <span class="va">biden</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>                data <span class="op">=</span> <span class="va">poll_data</span>,</span>
<span>                refresh <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                silent <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                seed <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span>
<span><span class="fu">write_rds</span><span class="op">(</span><span class="va">fit_gauss</span>, <span class="st">"data/fit_gauss.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_gauss</span> <span class="op">&lt;-</span> <span class="fu">read_rds</span><span class="op">(</span><span class="st">"data/fit_gauss.rds"</span><span class="op">)</span></span></code></pre>
<p>Again, this code only works if you are in the tutorial directory, not
in the higher directory of the R project itself. Also, the first two
commands are commented out, unless you are running them by hand to
create the object.</p>
<p>What happens if the data is too large? See the “Arrow” tutorial in
the <a href="https://ppbds.github.io/r4ds.tutorials/" class="external-link"><strong>r4ds.tutorials</strong></a>
for an example. First, we generally switch away from Code Exercises and
use Written Exercises. Students run the required commands and then
copy/paste the command/response. Big downloads don’t work well in
Exercise code chunks. Second, we create small versions of this big data
in the global <code>setup</code> chunk. This allows us to create Test
code chunks for most of the exercises which follow. These tests will run
much more quickly with this smaller data. Also, for any package on CRAN,
we need to keep the overall size of the package as small as
possible.</p>
</div>
<div class="section level3">
<h3 id="images">Images<a class="anchor" aria-label="anchor" href="#images"></a>
</h3>
<p>To add images to a tutorial, first make a directory called
<code>images</code> in the folder that contains
<code>tutorial.Rmd</code>. Store all images for that tutorial there. You
can work with those files in all the usual ways.</p>
<p>Use <code>include_graphics()</code> to add the image into the
document. Include this code in its own chunk, in the place where you
want the image to appear in the tutorial.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="st">```</span><span class="at">{r}</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="at">include_graphics("images/example.png")</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p><code>include_graphics()</code> is part of the <code>knitr</code>
package, so you need <code><a href="https://yihui.org/knitr/" class="external-link">library(knitr)</a></code> in the setup code
chunk. Note that you do not need to name these code chunks.</p>
<p>Because students will complete the tutorials using screens of very
different widths, it is a good idea to put
<code>knitr::opts_chunk$set(out.width = '90%')</code> in your
<code>setup</code> code chunk. In this way, images will appear as a
sensible size regardless of whether they are using a phone screen or a
big monitor.</p>
</div>
<div class="section level3">
<h3 id="files">Files<a class="anchor" aria-label="anchor" href="#files"></a>
</h3>
<p>Other files — most commonly text files or RDS files — are handled in
a similar fashion to images. Create a directory called <code>data</code>
in the same directory as the <code>tutorial.Rmd</code>, just as we do
with <code>images</code>.</p>
<p>There are two main uses for files in <code>data</code>. First, they
can be used at “compile time” (when the <code>tutorial.Rmd</code> is
knit to html) for making plots or doing anything else. Second, and more
importantly, they are available to students in the exercise code blocks
during “run time” (when students are doing the tutorial).</p>
</div>
<div class="section level3">
<h3 id="complex-text">Complex text<a class="anchor" aria-label="anchor" href="#complex-text"></a>
</h3>
<p>You sometimes want to include “complex” text in a tutorial. This is
most common when trying to teach students how to use R code chunks and
other strings which Rmarkdown wants to process in certain ways. You can
sometimes get away by placing such text in environments surrounded by
three, or even four, backticks. This works often, but not always.
Comments characters like <code>#</code> are especially problematic. We
also use the <a href="https://rundel.github.io/parsermd/" class="external-link"><strong>parsermd</strong></a>
package behind the scenes. It does not work as well as one might
like.</p>
<p>The “file” trick solves this problem. Create a txt file,
<code>example.txt</code>, with the text which you want to appear in the
tutorial. You can either leave it in the same directory as the
<code>tutorial.Rmd</code> file or, probably better, place it in either
the <code>data</code> or <code>images</code> directory. You then add
this code chunk to your tutorial.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="st">```</span><span class="at">{r file = "example.txt", echo = TRUE, eval = FALSE}</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>The <code>file</code> code chunk object loads the specified file. The
other code chunk options ensure that the text is echoed but not
evaluated.</p>
</div>
</div>
<div class="section level2">
<h2 id="checks">Checks<a class="anchor" aria-label="anchor" href="#checks"></a>
</h2>
<p>The simplest way to test the <code>tutorial.Rmd</code> with which you
are working on is to hit the “Run Document” button. This is the same
thing as running <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code> on that file:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">render</a></span><span class="op">(</span><span class="st">"inst/tutorials/02-terminal/tutorial.Rmd"</span><span class="op">)</span></span></code></pre></div>
<p>This assumes that you are located in the main directory of
<strong>your.package</strong>, as you normally would be. I am not sure
if this will catch all potential errors, but it will catch many issues,
and it is very quick. Replace <code>02-terminal</code> with the
appropriate directory.</p>
<div class="section level3">
<h3 id="test-before-submitting-a-pr">Test before submitting a PR<a class="anchor" aria-label="anchor" href="#test-before-submitting-a-pr"></a>
</h3>
<p>Once you are done editing your tutorial, you need to make sure it
works before you submit a pull request.</p>
<ol style="list-style-type: decimal">
<li><p>Click “Install and Restart” from the Build tab. Then, hit “Start
Tutorial” in the Tutorial tab. This mimics the experience that users
will have. This will catch some common errors, like having two code
chunks with the same name. (I am not sure if this does more or less than
the simple test as above.)</p></li>
<li><p>Do a full test, which means running <code>R CMD check</code>. Go
to the top right window of RStudio. Click the Build pane and hit the
“Check” button (with the green check mark). You will then see a bunch of
code and tests running. Make sure it says “OK” next to “testthat”. You
should always run this before submitting a pull request.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="what-to-do-if-r-cmd-check-fails">What to do if <code>R CMD check</code> fails<a class="anchor" aria-label="anchor" href="#what-to-do-if-r-cmd-check-fails"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Read the error message at the bottom of the Build pane. You want
to see “R CMD check succeeded.” If not, there is a problem. The error
message will often provide a clue as to where in your code the error
occurred.</p></li>
<li><p>If that error message is not detailed enough, go to the
<code>your.package.rcheck</code> folder, which should be located in the
same directory as <code>your.package</code> on your computer. This is a
folder created by the <code>R CMD check</code> process, and it will be
automatically deleted if the check process succeeds. If the process
fails, the <code>your.package.rcheck</code> folder stays around so that
you can examine it. The key file is <code>testthat.Rout.fail</code>,
which should be in the <code>tests</code> directory. It has more details
on what went wrong.</p></li>
</ol>
<p>The most common source of errors is something wrong with the hint
code chunks, which are not evaluated when you just Run Document. Make
sure the <code>eval = FALSE</code> argument is set in the code chunk for
all hints.</p>
</div>
<div class="section level3">
<h3 id="difficult-bugs">Difficult bugs<a class="anchor" aria-label="anchor" href="#difficult-bugs"></a>
</h3>
<ul>
<li><p>The most common issue is that an author will use a package like
<strong>ggthemes</strong> in their tutorial but then forget to include
<code><a href="https://jrnold.github.io/ggthemes/" class="external-link">library(ggthemes)</a></code> in the <code>setup</code> code chunk.
This will not cause any error in checking because
<strong>ggthemes</strong> is not actually used in the tutorial itself —
unless it is included in a Test code chunk, as it should be — so the
tutorial knits without a problem. But then the student tries to type
<code><a href="https://jrnold.github.io/ggthemes/" class="external-link">library(ggthemes)</a></code> as an answer to an exercise and gets an
error because the package has not been installed.</p></li>
<li><p>Note that <code>R CMD check</code> does not seem to catch cases
in which you <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> a package in a tutorial but that
package is not in DESCRIPTION. But such a discrepancy will cause an
error on Github Actions because, there, you only have access to packages
that have been installed as part of that test.</p></li>
<li><p>Be careful of the way that Github is sloppy in how it deals with
capitalization changes, especially when you change the name of a file.
For example, you might first commit a file named <code>Rproj.png</code>.
Later, you decide to change all file names for images to all lower case.
So, you change the name of the file to <code>rproj.png</code>. Commit
and push. Everything is great, right? No! Even if Github shows you the
new file name it might still have that file as <code>Rproj.png</code>
internally, with the capital “R”. This will cause errors when your run
your checks on Github:</p></li>
</ul>
<pre><code>Error: Cannot find the file(s): "images/rproj.png"</code></pre>
<p>But the file is there! You can see it! The tests work on your local
machine. The easiest solution is to delete the file (and commit that
change). And then change the name of the file to something else and use
it.</p>
<ul>
<li>
<code>R CMD check</code> will test that all tutorials have the
default sections exactly as they are in the Helper Tutorial template.
So, use the template. If either the “Information” or “Download answers”
sections are missing, <code>R CMD check</code> will return something
like “Missing a component part from file
/path/to/your/Rmd/file.Rmd”.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Kane.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
